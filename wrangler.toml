name = "awaazfm-analytic"
main = "src/index.ts"
compatibility_date = "2024-02-02"

[[durable_objects.bindings]]
name = "ANALYTICS_SESSION"
class_name = "AnalyticsSession"

[[durable_objects.bindings]]
name = "REGISTRY"
class_name = "Registry"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["AnalyticsSession", "Registry"]

[vars]
# THE CONTROL PLANE
# Only for User ID mapping, Shard Assignment, and System Stats. No analytics events.
MAIN_SHARD_URL = "https://awaaz-anl-default-rtdb.asia-southeast1.firebasedatabase.app"

# THE DATA PLANE (Data Shards)
# High-volume analytics storage.
SHARD_CONFIG = """
[
  "https://awaazfm-shard-2-default-rtdb.firebaseio.com",
  "https://awaazfm-shard-3-default-rtdb.firebaseio.com"
]
"""
TOTAL_SHARDS = "10"